<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ØªÙ„Ø§ÙˆØ© Ù…Ù…ØªØ¹Ø©</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Cairo:wght@700;900&family=Lemonada:wght@500&display=swap" rel="stylesheet">
    <style>
        /* --- 1. Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµÙØ­Ø© (Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ù„ÙŠÙ„ÙŠØ©) --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            margin: 0; padding: 0; height: 100vh; overflow: hidden;
            font-family: 'Cairo', sans-serif;
            background: radial-gradient(circle at center, #2b32b2 0%, #141e30 100%);
            display: flex; flex-direction: column; align-items: center;
            color: white;
        }

        /* --- 2. Ù†Ø¬ÙˆÙ… Ø§Ù„Ø®Ù„ÙÙŠØ© --- */
        #stars { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; }
        .star {
            position: absolute; background: white; border-radius: 50%; opacity: 0.6;
            animation: twinkle var(--d) infinite;
        }
        @keyframes twinkle { 50% { opacity: 1; transform: scale(1.3); } }

        /* --- 3. Ø²Ø± Ø§Ù„Ø±Ø¬ÙˆØ¹ --- */
        .header {
            width: 100%; padding: 15px 20px; z-index: 10;
            display: flex; justify-content: space-between; align-items: center;
        }
        .back-btn {
            background: rgba(255, 255, 255, 0.2); width: 45px; height: 45px;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            text-decoration: none; font-size: 1.5rem; color: white;
            border: 2px solid rgba(255,255,255,0.3); transition: 0.3s;
        }
        .back-btn:active { transform: scale(0.9); background: rgba(255,0,0,0.4); }

        /* --- 4. Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø³Ø­Ø±ÙŠØ© --- */
        .quran-card {
            background: linear-gradient(to bottom, #fff9c4, #fff59d);
            width: 92%; max-width: 650px; height: 58%;
            margin-top: 5px; border-radius: 35px;
            border: 6px solid #fff;
            box-shadow: 
                0 0 30px rgba(255, 215, 0, 0.3), /* ØªÙˆÙ‡Ø¬ Ø®Ø§Ø±Ø¬ÙŠ */
                inset 0 0 50px rgba(255, 235, 59, 0.2); /* ØªÙˆÙ‡Ø¬ Ø¯Ø§Ø®Ù„ÙŠ */
            display: flex; flex-direction: column; align-items: center;
            position: relative; overflow: hidden; z-index: 5;
            user-select: none; pointer-events: none; /* Ù…Ù†Ø¹ Ø§Ù„Ù†Ù‚Ø± Ø¯Ø§Ø®Ù„ Ø§Ù„Ù†Øµ */
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù†ÙˆØ§Ù† */
        .surah-title-badge {
            background: linear-gradient(135deg, #ff6f00, #ffca28);
            padding: 10px 45px; border-radius: 0 0 25px 25px;
            color: white; font-weight: 900; font-size: 1.3rem;
            font-family: 'Lemonada', sans-serif;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            margin-bottom: 15px; z-index: 10; text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù†Øµ */
        .quran-text-container {
            font-family: 'Amiri', serif; color: #4e342e;
            font-size: 1.5rem; line-height: 2.6; text-align: center;
            padding: 10px 25px 50px 25px;
            overflow-y: auto; width: 100%; flex-grow: 1;
            scroll-behavior: smooth; /* ØªÙ…Ø±ÙŠØ± Ù†Ø§Ø¹Ù… */
            /* Ø¥Ø®ÙØ§Ø¡ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± */
            scrollbar-width: none; -ms-overflow-style: none;
        }
        .quran-text-container::-webkit-scrollbar { display: none; }

        .basmalah { display: block; margin-bottom: 20px; opacity: 0.7; font-size: 1.3rem;}

        /* --- 5. Ø§Ù„ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø®Ø±Ø§ÙÙŠØ© Ù„Ù„Ø¢ÙŠØ§Øª --- */
        .verse {
            display: inline-block; /* Ù„Ø¬Ø¹Ù„ ÙƒÙ„ Ø¢ÙŠØ© ÙƒØªÙ„Ø© Ù…Ø³ØªÙ‚Ù„Ø© */
            transition: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
            padding: 5px 10px;
            border-radius: 15px;
            margin: 2px;
        }

        /* Ø§Ù„ÙƒÙ„Ø§Ø³ Ø§Ù„Ø³Ø­Ø±ÙŠ Ù„Ù„Ø¢ÙŠØ© Ø§Ù„Ù†Ø´Ø·Ø© */
        .verse-active {
            color: #d84315; /* Ù„ÙˆÙ† Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ ØºØ§Ù…Ù‚ Ù„Ù„Ù†Øµ */
            font-weight: 900;
            font-size: 1.7rem; /* ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø®Ø· Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
            background: rgba(255, 235, 59, 0.5); /* Ø®Ù„ÙÙŠØ© Ù…Ø¶ÙŠØ¦Ø© Ø®Ù„Ù Ø§Ù„Ø¢ÙŠØ© */
            box-shadow: 0 0 20px rgba(255, 193, 7, 0.6); /* ØªÙˆÙ‡Ø¬ Ø­ÙˆÙ„ Ø§Ù„Ø¢ÙŠØ© */
            transform: scale(1.05); /* ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø­Ø¬Ù… */
            text-shadow: 1px 1px 1px #fff, 0 0 5px #ffeb3b; /* Ø¸Ù„Ø§Ù„ Ù„Ù„Ù†Øµ */
            animation: pulseVerse 1.5s infinite alternate; /* Ù†Ø¨Ø¶ Ù…Ø³ØªÙ…Ø± */
        }

        @keyframes pulseVerse {
            from { box-shadow: 0 0 15px rgba(255, 193, 7, 0.5); }
            to { box-shadow: 0 0 30px rgba(255, 193, 7, 0.8), 0 0 10px rgba(255, 87, 34, 0.4); }
        }

        /* --- 6. Ù…Ù†Ø·Ù‚Ø© Ø¯ÙŠÙ†Ø§ ÙˆØ§Ù„ØªØ­ÙƒÙ… --- */
        .bottom-area {
            flex-grow: 1; width: 100%; position: relative;
            display: flex; flex-direction: column; justify-content: flex-end; align-items: center;
            padding-bottom: 25px; z-index: 20;
        }

        .dina-char {
            width: 170px; position: absolute; bottom: 5px; left: 5%;
            filter: drop-shadow(0 0 20px rgba(255,255,255,0.3));
            transition: transform 0.3s; pointer-events: none;
        }
        .talking { animation: bounceChar 0.5s infinite alternate cubic-bezier(0.45, 0.05, 0.55, 0.95); }
        @keyframes bounceChar { to { transform: translateY(-12px) scale(1.03) rotate(2deg); } }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© */
        .controls {
            display: flex; gap: 25px; align-items: center;
            background: rgba(20, 30, 48, 0.8); padding: 12px 35px;
            border-radius: 50px; backdrop-filter: blur(15px);
            border: 3px solid rgba(255, 215, 0, 0.3);
            box-shadow: 0 10px 30px rgba(0,0,0,0.4);
            margin-bottom: 20px; margin-left: 70px;
        }

        .btn {
            width: 65px; height: 65px; border-radius: 50%; border: none;
            font-size: 1.8rem; color: white; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            outline: none; -webkit-tap-highlight-color: transparent;
        }
        
        .play-btn {
            background: linear-gradient(135deg, #ffb300, #ff6f00);
            width: 85px; height: 85px; font-size: 2.8rem;
            box-shadow: 0 5px 20px rgba(255, 111, 0, 0.5);
        }
        .nav-btn, .repeat-btn {
            background: rgba(255,255,255,0.15); font-size: 1.6rem;
            border: 2px solid rgba(255,255,255,0.1);
        }

        .btn:hover { transform: scale(1.1); background: rgba(255,255,255,0.3); }
        .play-btn:hover { transform: scale(1.1) rotate(5deg); box-shadow: 0 0 30px rgba(255, 193, 7, 0.8); }
        .btn:active { transform: scale(0.9); }

        .repeat-active { background: #00e676 !important; color: #004d40; border-color: white; box-shadow: 0 0 20px #00e676; }

    </style>
</head>
<body>

    <div id="stars"></div>
    <div class="header"><a href="surah_list.html" class="back-btn">ğŸ”™</a></div>

    <div class="quran-card">
        <div class="surah-title-badge" id="titleDisplay">Ø³ÙˆØ±Ø© ...</div>
        <div class="quran-text-container" id="textContainer">
            </div>
    </div>

    <div class="bottom-area">
        <img src="assets/images/girl.png" class="dina-char" id="dinaImg" alt="Ø¯ÙŠÙ†Ø§">
        <div class="controls">
            <button class="btn repeat-btn" id="loopBtn" onclick="toggleLoop()">ğŸ”</button>
            <button class="btn nav-btn" onclick="seek(-5)">âª</button>
            <button class="btn play-btn" id="playBtn" onclick="togglePlay()">â–¶</button>
            <button class="btn nav-btn" onclick="seek(5)">â©</button>
        </div>
    </div>

    <audio id="audioPlayer"></audio>

    <script>
        // --- 1. Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (ØªÙ… ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§ Ù„ØªÙƒÙˆÙ† Ù…ØµÙÙˆÙØ© Ù…Ù† Ø§Ù„Ø¢ÙŠØ§Øª) ---
        // Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‡Ø°Ø§ Ù†Ø¸Ø§Ù… Ù…Ø­Ø§ÙƒØ§Ø©ØŒ Ø³Ø£Ù‚ÙˆÙ… Ø¨ÙˆØ¶Ø¹ Ø§Ù„Ø¢ÙŠØ§Øª Ø¨Ø´ÙƒÙ„ Ù…Ù†ÙØµÙ„ Ù„ÙƒÙŠ ÙŠØ¹Ù…Ù„ Ø§Ù„ØªØ¸Ù„ÙŠÙ„.
        const quranData = {
            101: { name: "Ø§Ù„Ù‚Ø§Ø±Ø¹Ø©", verses: [
                "Ù±Ù„Û¡Ù‚ÙØ§Ø±ÙØ¹ÙØ©Ù (1)", "Ù…ÙØ§ Ù±Ù„Û¡Ù‚ÙØ§Ø±ÙØ¹ÙØ©Ù (2)", "ÙˆÙÙ…ÙØ¢ Ø£ÙØ¯Û¡Ø±ÙÙ‰Ù°ÙƒÙ Ù…ÙØ§ Ù±Ù„Û¡Ù‚ÙØ§Ø±ÙØ¹ÙØ©Ù (3)", "ÙŠÙÙˆÛ¡Ù…Ù ÙŠÙÙƒÙÙˆÙ†Ù Ù±Ù„Ù†ÙÙ‘Ø§Ø³Ù ÙƒÙÙ±Ù„Û¡ÙÙØ±ÙØ§Ø´Ù Ù±Ù„Û¡Ù…ÙØ¨Û¡Ø«ÙÙˆØ«Ù (4)", "ÙˆÙØªÙÙƒÙÙˆÙ†Ù Ù±Ù„Û¡Ø¬ÙØ¨ÙØ§Ù„Ù ÙƒÙÙ±Ù„Û¡Ø¹ÙÙ‡Û¡Ù†Ù Ù±Ù„Û¡Ù…ÙÙ†ÙÙÙˆØ´Ù (5)", "ÙÙØ£ÙÙ…ÙÙ‘Ø§ Ù…ÙÙ† Ø«ÙÙ‚ÙÙ„ÙØªÛ¡ Ù…ÙÙˆÙÙ°Ø²ÙÙŠÙ†ÙÙ‡ÙÛ¥ (6)", "ÙÙÙ‡ÙÙˆÙ ÙÙÙŠ Ø¹ÙÙŠØ´ÙØ©Ù– Ø±ÙÙ‘Ø§Ø¶ÙÙŠÙØ©Ù– (7)", "ÙˆÙØ£ÙÙ…ÙÙ‘Ø§ Ù…ÙÙ†Û¡ Ø®ÙÙÙÙ‘ØªÛ¡ Ù…ÙÙˆÙÙ°Ø²ÙÙŠÙ†ÙÙ‡ÙÛ¥ (8)", "ÙÙØ£ÙÙ…ÙÙ‘Ù‡ÙÛ¥ Ù‡ÙØ§ÙˆÙÙŠÙØ©Ù (9)", "ÙˆÙÙ…ÙØ¢ Ø£ÙØ¯Û¡Ø±ÙÙ‰Ù°ÙƒÙ Ù…ÙØ§ Ù‡ÙÙŠÙÙ‡Û¡ (10)", "Ù†ÙØ§Ø±ÙŒ Ø­ÙØ§Ù…ÙÙŠÙØ©ÙÛ¢ (11)"
            ]},
            102: { name: "Ø§Ù„ØªÙƒØ§Ø«Ø±", verses: [
                "Ø£ÙÙ„Û¡Ù‡ÙÙ‰Ù°ÙƒÙÙ…Ù Ù±Ù„ØªÙÙ‘ÙƒÙØ§Ø«ÙØ±Ù (1)", "Ø­ÙØªÙÙ‘Ù‰Ù° Ø²ÙØ±Û¡ØªÙÙ…Ù Ù±Ù„Û¡Ù…ÙÙ‚ÙØ§Ø¨ÙØ±Ù (2)", "ÙƒÙÙ„ÙÙ‘Ø§ Ø³ÙÙˆÛ¡ÙÙ ØªÙØ¹Û¡Ù„ÙÙ…ÙÙˆÙ†Ù (3)", "Ø«ÙÙ…ÙÙ‘ ÙƒÙÙ„ÙÙ‘Ø§ Ø³ÙÙˆÛ¡ÙÙ ØªÙØ¹Û¡Ù„ÙÙ…ÙÙˆÙ†Ù (4)", "ÙƒÙÙ„ÙÙ‘Ø§ Ù„ÙÙˆÛ¡ ØªÙØ¹Û¡Ù„ÙÙ…ÙÙˆÙ†Ù Ø¹ÙÙ„Û¡Ù…Ù Ù±Ù„Û¡ÙŠÙÙ‚ÙÙŠÙ†Ù (5)", "Ù„ÙØªÙØ±ÙÙˆÙÙ†ÙÙ‘ Ù±Ù„Û¡Ø¬ÙØ­ÙÙŠÙ…Ù (6)", "Ø«ÙÙ…ÙÙ‘ Ù„ÙØªÙØ±ÙÙˆÙÙ†ÙÙ‘Ù‡ÙØ§ Ø¹ÙÙŠÛ¡Ù†Ù Ù±Ù„Û¡ÙŠÙÙ‚ÙÙŠÙ†Ù (7)", "Ø«ÙÙ…ÙÙ‘ Ù„ÙØªÙØ³Û¡Ù€ÙÙ”Ù„ÙÙ†ÙÙ‘ ÙŠÙÙˆÛ¡Ù…ÙØ¦ÙØ°Ù Ø¹ÙÙ†Ù Ù±Ù„Ù†ÙÙ‘Ø¹ÙÙŠÙ…Ù (8)"
            ]},
            103: { name: "Ø§Ù„Ø¹ØµØ±", verses: [
                "ÙˆÙÙ±Ù„Û¡Ø¹ÙØµÛ¡Ø±Ù (1)", "Ø¥ÙÙ†ÙÙ‘ Ù±Ù„Û¡Ø¥ÙÙ†Ø³ÙÙ°Ù†Ù Ù„ÙÙÙÙŠ Ø®ÙØ³Û¡Ø±Ù (2)", "Ø¥ÙÙ„ÙÙ‘Ø§ Ù±Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù Ø¡ÙØ§Ù…ÙÙ†ÙÙˆØ§Ù’ ÙˆÙØ¹ÙÙ…ÙÙ„ÙÙˆØ§Ù’ Ù±Ù„ØµÙÙ‘Ù€Ù°Ù„ÙØ­ÙÙ°ØªÙ ÙˆÙØªÙÙˆÙØ§ØµÙÙˆÛ¡Ø§Ù’ Ø¨ÙÙ±Ù„Û¡Ø­ÙÙ‚ÙÙ‘ ÙˆÙØªÙÙˆÙØ§ØµÙÙˆÛ¡Ø§Ù’ Ø¨ÙÙ±Ù„ØµÙÙ‘Ø¨Û¡Ø±Ù (3)"
            ]},
            104: { name: "Ø§Ù„Ù‡Ù…Ø²Ø©", verses: [
                "ÙˆÙÙŠÛ¡Ù„Ù Ù„ÙÙ‘ÙƒÙÙ„ÙÙ‘ Ù‡ÙÙ…ÙØ²ÙØ©Ù– Ù„ÙÙ‘Ù…ÙØ²ÙØ©Ù (1)", "Ù±Ù„ÙÙ‘Ø°ÙÙŠ Ø¬ÙÙ…ÙØ¹Ù Ù…ÙØ§Ù„Ù—Ø§ ÙˆÙØ¹ÙØ¯ÙÙ‘Ø¯ÙÙ‡ÙÛ¥ (2)", "ÙŠÙØ­Û¡Ø³ÙØ¨Ù Ø£ÙÙ†ÙÙ‘ Ù…ÙØ§Ù„ÙÙ‡ÙÛ¥Ù“ Ø£ÙØ®Û¡Ù„ÙØ¯ÙÙ‡ÙÛ¥ (3)", "ÙƒÙÙ„ÙÙ‘Ø§Û– Ù„ÙÙŠÙÙ†Û¢Ø¨ÙØ°ÙÙ†ÙÙ‘ ÙÙÙŠ Ù±Ù„Û¡Ø­ÙØ·ÙÙ…ÙØ©Ù (4)", "ÙˆÙÙ…ÙØ¢ Ø£ÙØ¯Û¡Ø±ÙÙ‰Ù°ÙƒÙ Ù…ÙØ§ Ù±Ù„Û¡Ø­ÙØ·ÙÙ…ÙØ©Ù (5)", "Ù†ÙØ§Ø±Ù Ù±Ù„Ù„ÙÙ‘Ù‡Ù Ù±Ù„Û¡Ù…ÙÙˆÙ‚ÙØ¯ÙØ©Ù (6)", "Ù±Ù„ÙÙ‘ØªÙÙŠ ØªÙØ·ÙÙ‘Ù„ÙØ¹Ù Ø¹ÙÙ„ÙÙ‰ Ù±Ù„Û¡Ø£ÙÙÛ¡Ù€ÙÙ”Ø¯ÙØ©Ù (7)", "Ø¥ÙÙ†ÙÙ‘Ù‡ÙØ§ Ø¹ÙÙ„ÙÙŠÛ¡Ù‡ÙÙ… Ù…ÙÙ‘Ø¤Û¡ØµÙØ¯ÙØ©Ù (8)", "ÙÙÙŠ Ø¹ÙÙ…ÙØ¯Ù– Ù…ÙÙ‘Ù…ÙØ¯ÙÙ‘Ø¯ÙØ©ÙÛ¢ (9)"
            ]},
            // ... ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø³ÙˆØ± Ø¨Ù†ÙØ³ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© (Ù…ØµÙÙˆÙØ© Ø¢ÙŠØ§Øª) ...
            // ÙƒÙ…Ø«Ø§Ù„ Ù„Ø³ÙˆØ±Ø© Ø·ÙˆÙŠÙ„Ø©:
            78: { name: "Ø§Ù„Ù†Ø¨Ø£", verses: ["Ø¹ÙÙ…ÙÙ‘ ÙŠÙØªÙØ³ÙØ¢Ø¡ÙÙ„ÙÙˆÙ†Ù (1)", "Ø¹ÙÙ†Ù Ù±Ù„Ù†ÙÙ‘Ø¨ÙØ¥Ù Ù±Ù„Û¡Ø¹ÙØ¸ÙÙŠÙ…Ù (2)", "Ù±Ù„ÙÙ‘Ø°ÙÙŠ Ù‡ÙÙ…Û¡ ÙÙÙŠÙ‡Ù Ù…ÙØ®Û¡ØªÙÙ„ÙÙÙÙˆÙ†Ù (3)", "ÙƒÙÙ„ÙÙ‘Ø§ Ø³ÙÙŠÙØ¹Û¡Ù„ÙÙ…ÙÙˆÙ†Ù (4)", "(Ø³ÙŠØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¨Ø§Ù‚ÙŠ Ù„Ø§Ø­Ù‚Ø§Ù‹)..."] }
        };

        // --- Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ ---
        const urlParams = new URLSearchParams(window.location.search);
        const id = urlParams.get('id');
        
        const audio = document.getElementById('audioPlayer');
        const playBtn = document.getElementById('playBtn');
        const dinaImg = document.getElementById('dinaImg');
        const titleDisplay = document.getElementById('titleDisplay');
        const textContainer = document.getElementById('textContainer');
        const loopBtn = document.getElementById('loopBtn');

        let currentVersesElements = [];

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¨Ù†Ø§Ø¡ Ø§Ù„Ù†Øµ
        if (quranData[id]) {
            titleDisplay.innerText = "Ø³ÙˆØ±Ø© " + quranData[id].name;
            audio.src = `${id}.mp3`;
            
            // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø¢ÙŠØ§Øª Ø¯Ø§Ø®Ù„ Ø¹Ù†Ø§ØµØ± span Ù…Ù†ÙØµÙ„Ø©
            let htmlContent = '<span class="basmalah">Ø¨ÙØ³Û¡Ù…Ù Ù±Ù„Ù„ÙÙ‘Ù‡Ù Ù±Ù„Ø±ÙÙ‘Ø­Û¡Ù…ÙÙ°Ù†Ù Ù±Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</span>';
            quranData[id].verses.forEach((verseText, index) => {
                htmlContent += `<span class="verse" id="verse-${index}">${verseText} </span>`;
            });
            textContainer.innerHTML = htmlContent;
            // Ø­ÙØ¸ Ù…Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù„Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹
            currentVersesElements = Array.from(textContainer.getElementsByClassName('verse'));

        } else {
            titleDisplay.innerText = "Ø§Ù„Ø³ÙˆØ±Ø© ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©";
            textContainer.innerHTML = "<p>Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù‚Ø±ÙŠØ¨Ø§Ù‹...</p>";
        }

        // --- Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø³Ø­Ø±ÙŠØ© Ù„Ù„ØªØ²Ø§Ù…Ù† (Magic Sync Simulation) ---
        audio.ontimeupdate = () => {
            if (!audio.duration || currentVersesElements.length === 0) return;

            // Ø­Ø³Ø§Ø¨ Ù†Ø³Ø¨Ø© Ø§Ù„ØªÙ‚Ø¯Ù… ÙÙŠ Ø§Ù„ØµÙˆØª (Ù…Ù† 0.0 Ø¥Ù„Ù‰ 1.0)
            const progress = audio.currentTime / audio.duration;
            // ØªØ­Ø¯ÙŠØ¯ Ù…Ø¤Ø´Ø± Ø§Ù„Ø¢ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø³Ø¨Ø©
            let activeIndex = Math.floor(progress * currentVersesElements.length);
            // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… ØªØ¬Ø§ÙˆØ² Ø¢Ø®Ø± Ø¢ÙŠØ©
            activeIndex = Math.min(activeIndex, currentVersesElements.length - 1);

            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ¸Ù„ÙŠÙ„ Ø¹Ù† Ø§Ù„Ø¬Ù…ÙŠØ¹
            currentVersesElements.forEach(el => el.classList.remove('verse-active'));
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ¸Ù„ÙŠÙ„ Ø§Ù„Ø³Ø­Ø±ÙŠ Ù„Ù„Ø¢ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
            if (currentVersesElements[activeIndex]) {
                const activeVerse = currentVersesElements[activeIndex];
                activeVerse.classList.add('verse-active');
                
                // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø§Ù„Ø³Ù„Ø³ Ù„Ù…Ù†ØªØµÙ Ø§Ù„Ø´Ø§Ø´Ø©
                activeVerse.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        };

        // Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ØªØ´ØºÙŠÙ„
        function togglePlay() {
            if (audio.paused) {
                audio.play();
                playBtn.innerText = "â¸";
                dinaImg.classList.add('talking');
            } else {
                audio.pause();
                playBtn.innerText = "â–¶";
                dinaImg.classList.remove('talking');
            }
        }

        // Ø§Ù„ØªÙƒØ±Ø§Ø±
        function toggleLoop() {
            audio.loop = !audio.loop;
            loopBtn.classList.toggle('repeat-active', audio.loop);
        }

        // ØªÙ‚Ø¯ÙŠÙ… ÙˆØªØ£Ø®ÙŠØ±
        function seek(seconds) { audio.currentTime += seconds; }

        // Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØµÙˆØª
        audio.onended = () => {
            if(!audio.loop) {
                playBtn.innerText = "â–¶";
                dinaImg.classList.remove('talking');
                // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ¸Ù„ÙŠÙ„ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡
                currentVersesElements.forEach(el => el.classList.remove('verse-active'));
                textContainer.scrollTo({ top: 0, behavior: 'smooth' }); // Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø¨Ø¯Ø§ÙŠØ©
            }
        };

        // Ù†Ø¬ÙˆÙ… Ø§Ù„Ø®Ù„ÙÙŠØ©
        const stars = document.getElementById('stars');
        for(let i=0; i<60; i++) {
            const s = document.createElement('div');
            s.className = 'star';
            s.style.left = Math.random()*100 + '%';
            s.style.top = Math.random()*100 + '%';
            s.style.width = Math.random()*3 + 'px';
            s.style.height = s.style.width;
            s.style.setProperty('--d', (Math.random()*3+2)+'s');
            stars.appendChild(s);
        }
    </script>
</body>
</html>
